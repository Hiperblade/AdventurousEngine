<!DOCTYPE html>
<html>
<head>
    <title></title>
    <script type="text/javascript" src="js/jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="js/animatronic.js"></script>
    <script type="text/javascript" src="js/animatronicsController.js"></script>
    <script type="text/javascript" src="js/engine.js"></script>
	<style TYPE="text/css">
		.actor
		{
			position: absolute;
			top: 100px;
			left: 100px;
			width: 81px;
			height: 48px;
		}

		.fish
		{
			position: absolute;
			top: 150px;
			left: 250px;
			width: 71px;
			height: 60px;
		}

		.scene
		{
			position: absolute;
			top: 0px;
			left: 0px;
			width: 540px;
			height: 338px;
		}

		.controlPanel
		{
			position: absolute;
			top: 350px;
			left: 0px;
		}

		#frontClass
		{
			opacity: 0.9;
		}
	</style>
</head>
<body>
	<!-- ------------- -->
	<div class="actor" id="actorCat">
	<svg xmlns="http://www.w3.org/2000/svg">
		<g id="cat" class="actor">
			<!-- Sit -->
			<!--image id="catF_s" width="81" height="48" xlink:href="Cat/cat_s.gif" style="visibility:hidden;"></image>

			<set id="cat_s_1"  xlink:href="#catF_s" attributeName="visibility" attributeType="CSS" to="visible" begin="indefinite"  dur="1.4s" fill="freeze"></set>
			<set               xlink:href="#catF_s" attributeName="visibility" attributeType="CSS" to="hidden"  begin="cat_s_1.end" fill="freeze"
							   onbegin="Cat.onEnd();"></set-->

			<image id="catF_s_1" width="81" height="48" xlink:href="Cat/cat_s_1.png" style="visibility:hidden;"></image>
			<image id="catF_s_2" width="81" height="48" xlink:href="Cat/cat_s_2.png" style="visibility:hidden;"></image>
			<image id="catF_s_3" width="81" height="48" xlink:href="Cat/cat_s_3.png" style="visibility:hidden;"></image>
			<set id="cat_s_1"  xlink:href="#catF_s_1" attributeName="visibility" attributeType="CSS" to="visible" begin="indefinite"  dur="0.1s" fill="freeze"></set>
			<set               xlink:href="#catF_s_1" attributeName="visibility" attributeType="CSS" to="hidden"  begin="cat_s_1.end" fill="freeze"></set>
			<set id="cat_s_2"  xlink:href="#catF_s_2" attributeName="visibility" attributeType="CSS" to="visible" begin="cat_s_1.end" dur="0.1s" fill="freeze"></set>
			<set               xlink:href="#catF_s_2" attributeName="visibility" attributeType="CSS" to="hidden"  begin="cat_s_2.end" fill="freeze"></set>
			<set id="cat_s_3"  xlink:href="#catF_s_3" attributeName="visibility" attributeType="CSS" to="visible" begin="cat_s_2.end" dur="0.1s" fill="freeze"></set>
			<set               xlink:href="#catF_s_3" attributeName="visibility" attributeType="CSS" to="hidden"  begin="cat_s_3.end" fill="freeze"
							   onbegin="Cat.onEnd();"></set>

			<!-- Sit Roar -->
			<image id="catF_s_r_1" width="81" height="48" xlink:href="Cat/cat_s_r_1.png" style="visibility:hidden;"></image>
			<image id="catF_s_r_2" width="81" height="48" xlink:href="Cat/cat_s_r_2.png" style="visibility:hidden;"></image>
			<image id="catF_s_r_3" width="81" height="48" xlink:href="Cat/cat_s_r_3.png" style="visibility:hidden;"></image>
			<set id="cat_s_r_1" xlink:href="#catF_s_r_1" attributeName="visibility" attributeType="CSS" to="visible" begin="indefinite"    dur="0.2s" fill="freeze"></set>
			<set                xlink:href="#catF_s_r_1" attributeName="visibility" attributeType="CSS" to="hidden"  begin="cat_s_r_1.end" fill="freeze"></set>
			<set id="cat_s_r_2" xlink:href="#catF_s_r_2" attributeName="visibility" attributeType="CSS" to="visible" begin="cat_s_r_1.end" dur="0.2s" fill="freeze"></set>
			<set                xlink:href="#catF_s_r_2" attributeName="visibility" attributeType="CSS" to="hidden"  begin="cat_s_r_2.end" fill="freeze"></set>
			<set id="cat_s_r_3" xlink:href="#catF_s_r_3" attributeName="visibility" attributeType="CSS" to="visible" begin="cat_s_r_2.end" dur="0.8s" fill="freeze"></set>
			<set                xlink:href="#catF_s_r_3" attributeName="visibility" attributeType="CSS" to="hidden"  begin="cat_s_r_3.end" fill="freeze"></set>
			<set id="cat_s_r_4" xlink:href="#catF_s_r_2" attributeName="visibility" attributeType="CSS" to="visible" begin="cat_s_r_3.end" dur="0.2s" fill="freeze"></set>
			<set                xlink:href="#catF_s_r_2" attributeName="visibility" attributeType="CSS" to="hidden"  begin="cat_s_r_4.end" fill="freeze"
							    onbegin="Cat.onEnd();"></set>

			<!-- Up Run -->
			<image id="catF_u_r_1" width="81" height="48" xlink:href="Cat/cat_u_r_1.png" style="visibility:hidden;"></image>
			<image id="catF_u_r_2" width="81" height="48" xlink:href="Cat/cat_u_r_2.png" style="visibility:hidden;"></image>
			<image id="catF_u_r_3" width="81" height="48" xlink:href="Cat/cat_u_r_3.png" style="visibility:hidden;"></image>
			<image id="catF_u_r_4" width="81" height="48" xlink:href="Cat/cat_u_r_4.png" style="visibility:hidden;"></image>
			<image id="catF_u_r_5" width="81" height="48" xlink:href="Cat/cat_u_r_5.png" style="visibility:hidden;"></image>
			<image id="catF_u_r_6" width="81" height="48" xlink:href="Cat/cat_u_r_6.png" style="visibility:hidden;"></image>
			<image id="catF_u_r_7" width="81" height="48" xlink:href="Cat/cat_u_r_7.png" style="visibility:hidden;"></image>
			<set id="cat_u_r_1" xlink:href="#catF_u_r_1" attributeName="visibility" attributeType="CSS" to="visible" begin="indefinite"    dur="0.2s" fill="freeze"></set>
			<set                xlink:href="#catF_u_r_1" attributeName="visibility" attributeType="CSS" to="hidden"  begin="cat_u_r_1.end" fill="freeze"></set>
			<set id="cat_u_r_2" xlink:href="#catF_u_r_2" attributeName="visibility" attributeType="CSS" to="visible" begin="cat_u_r_1.end" dur="0.2s" fill="freeze"></set>
			<set                xlink:href="#catF_u_r_2" attributeName="visibility" attributeType="CSS" to="hidden"  begin="cat_u_r_2.end" fill="freeze"></set>
			<set id="cat_u_r_3" xlink:href="#catF_u_r_3" attributeName="visibility" attributeType="CSS" to="visible" begin="cat_u_r_2.end" dur="0.2s" fill="freeze"></set>
			<set                xlink:href="#catF_u_r_3" attributeName="visibility" attributeType="CSS" to="hidden"  begin="cat_u_r_3.end" fill="freeze"></set>
			<set id="cat_u_r_4" xlink:href="#catF_u_r_4" attributeName="visibility" attributeType="CSS" to="visible" begin="cat_u_r_3.end" dur="0.2s" fill="freeze"></set>
			<set                xlink:href="#catF_u_r_4" attributeName="visibility" attributeType="CSS" to="hidden"  begin="cat_u_r_4.end" fill="freeze"></set>
			<set id="cat_u_r_5" xlink:href="#catF_u_r_5" attributeName="visibility" attributeType="CSS" to="visible" begin="cat_u_r_4.end" dur="0.2s" fill="freeze"></set>
			<set                xlink:href="#catF_u_r_5" attributeName="visibility" attributeType="CSS" to="hidden"  begin="cat_u_r_5.end" fill="freeze"
							    onbegin="Cat.onEnd();"></set>
			<!-- Up Stop -->
			<image id="catF_u_1" width="81" height="48" xlink:href="Cat/cat_u_1.png" style="visibility:hidden;"></image>
			<image id="catF_u_2" width="81" height="48" xlink:href="Cat/cat_u_1.png" style="visibility:hidden;"></image>
			<set id="cat_u_1"  xlink:href="#catF_u_1" attributeName="visibility" attributeType="CSS" to="visible" begin="indefinite"  dur="0.2s" fill="freeze"></set>
			<set               xlink:href="#catF_u_1" attributeName="visibility" attributeType="CSS" to="hidden"  begin="cat_u_1.end" fill="freeze"></set>
			<set id="cat_u_2"  xlink:href="#catF_u_2" attributeName="visibility" attributeType="CSS" to="visible" begin="cat_u_1.end" dur="0.2s" fill="freeze"></set>
			<set               xlink:href="#catF_u_2" attributeName="visibility" attributeType="CSS" to="hidden"  begin="cat_u_2.end" fill="freeze"
							   onbegin="Cat.onEnd();"></set>

			<!-- Down Run -->
			<image id="catF_d_r_1" width="81" height="48" xlink:href="Cat/cat_d_r_1.png" style="visibility:hidden;"></image>
			<image id="catF_d_r_2" width="81" height="48" xlink:href="Cat/cat_d_r_2.png" style="visibility:hidden;"></image>
			<image id="catF_d_r_3" width="81" height="48" xlink:href="Cat/cat_d_r_3.png" style="visibility:hidden;"></image>
			<image id="catF_d_r_4" width="81" height="48" xlink:href="Cat/cat_d_r_4.png" style="visibility:hidden;"></image>
			<image id="catF_d_r_5" width="81" height="48" xlink:href="Cat/cat_d_r_5.png" style="visibility:hidden;"></image>
			<image id="catF_d_r_6" width="81" height="48" xlink:href="Cat/cat_d_r_6.png" style="visibility:hidden;"></image>
			<image id="catF_d_r_7" width="81" height="48" xlink:href="Cat/cat_d_r_7.png" style="visibility:hidden;"></image>
			<set id="cat_d_r_1" xlink:href="#catF_d_r_1" attributeName="visibility" attributeType="CSS" to="visible" begin="indefinite"    dur="0.2s" fill="freeze"></set>
			<set                xlink:href="#catF_d_r_1" attributeName="visibility" attributeType="CSS" to="hidden"  begin="cat_d_r_1.end" fill="freeze"></set>
			<set id="cat_d_r_2" xlink:href="#catF_d_r_2" attributeName="visibility" attributeType="CSS" to="visible" begin="cat_d_r_1.end" dur="0.2s" fill="freeze"></set>
			<set                xlink:href="#catF_d_r_2" attributeName="visibility" attributeType="CSS" to="hidden"  begin="cat_d_r_2.end" fill="freeze"></set>
			<set id="cat_d_r_3" xlink:href="#catF_d_r_3" attributeName="visibility" attributeType="CSS" to="visible" begin="cat_d_r_2.end" dur="0.2s" fill="freeze"></set>
			<set                xlink:href="#catF_d_r_3" attributeName="visibility" attributeType="CSS" to="hidden"  begin="cat_d_r_3.end" fill="freeze"></set>
			<set id="cat_d_r_4" xlink:href="#catF_d_r_4" attributeName="visibility" attributeType="CSS" to="visible" begin="cat_d_r_3.end" dur="0.2s" fill="freeze"></set>
			<set                xlink:href="#catF_d_r_4" attributeName="visibility" attributeType="CSS" to="hidden"  begin="cat_d_r_4.end" fill="freeze"></set>
			<set id="cat_d_r_5" xlink:href="#catF_d_r_5" attributeName="visibility" attributeType="CSS" to="visible" begin="cat_d_r_4.end" dur="0.2s" fill="freeze"></set>
			<set                xlink:href="#catF_d_r_5" attributeName="visibility" attributeType="CSS" to="hidden"  begin="cat_d_r_5.end" fill="freeze"
								onbegin="Cat.onEnd();"></set>
			<!-- Down Stop -->
			<image id="catF_d_1" width="81" height="48" xlink:href="Cat/cat_d_1.png" style="visibility:hidden;"></image>
			<image id="catF_d_2" width="81" height="48" xlink:href="Cat/cat_d_1.png" style="visibility:hidden;"></image>
			<set id="cat_d_1"  xlink:href="#catF_d_1" attributeName="visibility" attributeType="CSS" to="visible" begin="indefinite"  dur="0.2s" fill="freeze"></set>
			<set               xlink:href="#catF_d_1" attributeName="visibility" attributeType="CSS" to="hidden"  begin="cat_d_1.end" fill="freeze"></set>
			<set id="cat_d_2"  xlink:href="#catF_d_2" attributeName="visibility" attributeType="CSS" to="visible" begin="cat_d_1.end" dur="0.2s" fill="freeze"></set>
			<set               xlink:href="#catF_d_2" attributeName="visibility" attributeType="CSS" to="hidden"  begin="cat_d_2.end" fill="freeze"
							   onbegin="Cat.onEnd();"></set>

			<!-- Right Run -->
			<image id="catF_r_r_1" width="81" height="48" xlink:href="Cat/cat_r_r_1.png" style="visibility:hidden;"></image>
			<image id="catF_r_r_2" width="81" height="48" xlink:href="Cat/cat_r_r_2.png" style="visibility:hidden;"></image>
			<image id="catF_r_r_3" width="81" height="48" xlink:href="Cat/cat_r_r_3.png" style="visibility:hidden;"></image>
			<image id="catF_r_r_4" width="81" height="48" xlink:href="Cat/cat_r_r_4.png" style="visibility:hidden;"></image>
			<image id="catF_r_r_5" width="81" height="48" xlink:href="Cat/cat_r_r_5.png" style="visibility:hidden;"></image>
			<set id="cat_r_r_1" xlink:href="#catF_r_r_1" attributeName="visibility" attributeType="CSS" to="visible" begin="indefinite"    dur="0.2s" fill="freeze"></set>
			<set                xlink:href="#catF_r_r_1" attributeName="visibility" attributeType="CSS" to="hidden"  begin="cat_r_r_1.end" fill="freeze"></set>
			<set id="cat_r_r_2" xlink:href="#catF_r_r_2" attributeName="visibility" attributeType="CSS" to="visible" begin="cat_r_r_1.end" dur="0.2s" fill="freeze"></set>
			<set                xlink:href="#catF_r_r_2" attributeName="visibility" attributeType="CSS" to="hidden"  begin="cat_r_r_2.end" fill="freeze"></set>
			<set id="cat_r_r_3" xlink:href="#catF_r_r_3" attributeName="visibility" attributeType="CSS" to="visible" begin="cat_r_r_2.end" dur="0.2s" fill="freeze"></set>
			<set                xlink:href="#catF_r_r_3" attributeName="visibility" attributeType="CSS" to="hidden"  begin="cat_r_r_3.end" fill="freeze"></set>
			<set id="cat_r_r_4" xlink:href="#catF_r_r_4" attributeName="visibility" attributeType="CSS" to="visible" begin="cat_r_r_3.end" dur="0.2s" fill="freeze"></set>
			<set                xlink:href="#catF_r_r_4" attributeName="visibility" attributeType="CSS" to="hidden"  begin="cat_r_r_4.end" fill="freeze"></set>
			<set id="cat_r_r_5" xlink:href="#catF_r_r_5" attributeName="visibility" attributeType="CSS" to="visible" begin="cat_r_r_4.end" dur="0.2s" fill="freeze"></set>
			<set                xlink:href="#catF_r_r_5" attributeName="visibility" attributeType="CSS" to="hidden"  begin="cat_r_r_5.end" fill="freeze"
                    onbegin="Cat.onEnd();"></set>

			<!-- Right Stop -->
			<image id="catF_r_1" width="81" height="48" xlink:href="Cat/cat_r_1.png" style="visibility:hidden;"></image>
			<image id="catF_r_2" width="81" height="48" xlink:href="Cat/cat_r_2.png" style="visibility:hidden;"></image>
			<image id="catF_r_3" width="81" height="48" xlink:href="Cat/cat_r_3.png" style="visibility:hidden;"></image>
			<set id="cat_r_1"  xlink:href="#catF_r_1" attributeName="visibility" attributeType="CSS" to="visible" begin="indefinite"  dur="0.2s" fill="freeze"></set>
			<set               xlink:href="#catF_r_1" attributeName="visibility" attributeType="CSS" to="hidden"  begin="cat_r_1.end" fill="freeze"></set>
			<set id="cat_r_2"  xlink:href="#catF_r_2" attributeName="visibility" attributeType="CSS" to="visible" begin="cat_r_1.end" dur="0.2s" fill="freeze"></set>
			<set               xlink:href="#catF_r_2" attributeName="visibility" attributeType="CSS" to="hidden"  begin="cat_r_2.end" fill="freeze"></set>
			<set id="cat_r_3"  xlink:href="#catF_r_3" attributeName="visibility" attributeType="CSS" to="visible" begin="cat_r_2.end" dur="0.2s" fill="freeze"></set>
			<set               xlink:href="#catF_r_3" attributeName="visibility" attributeType="CSS" to="hidden"  begin="cat_r_3.end" fill="freeze"
							   onbegin="Cat.onEnd();"></set>

			<!-- Left Run -->
			<image id="catF_l_r_1" width="81" height="48" xlink:href="Cat/cat_l_r_1.png" style="visibility:hidden;"></image>
			<image id="catF_l_r_2" width="81" height="48" xlink:href="Cat/cat_l_r_2.png" style="visibility:hidden;"></image>
			<image id="catF_l_r_3" width="81" height="48" xlink:href="Cat/cat_l_r_3.png" style="visibility:hidden;"></image>
			<image id="catF_l_r_4" width="81" height="48" xlink:href="Cat/cat_l_r_4.png" style="visibility:hidden;"></image>
			<image id="catF_l_r_5" width="81" height="48" xlink:href="Cat/cat_l_r_5.png" style="visibility:hidden;"></image>
			<set id="cat_l_r_1" xlink:href="#catF_l_r_1" attributeName="visibility" attributeType="CSS" to="visible" begin="indefinite"    dur="0.2s" fill="freeze"></set>
			<set                xlink:href="#catF_l_r_1" attributeName="visibility" attributeType="CSS" to="hidden"  begin="cat_l_r_1.end" fill="freeze"></set>
			<set id="cat_l_r_2" xlink:href="#catF_l_r_2" attributeName="visibility" attributeType="CSS" to="visible" begin="cat_l_r_1.end" dur="0.2s" fill="freeze"></set>
			<set                xlink:href="#catF_l_r_2" attributeName="visibility" attributeType="CSS" to="hidden"  begin="cat_l_r_2.end" fill="freeze"></set>
			<set id="cat_l_r_3" xlink:href="#catF_l_r_3" attributeName="visibility" attributeType="CSS" to="visible" begin="cat_l_r_2.end" dur="0.2s" fill="freeze"></set>
			<set                xlink:href="#catF_l_r_3" attributeName="visibility" attributeType="CSS" to="hidden"  begin="cat_l_r_3.end" fill="freeze"></set>
			<set id="cat_l_r_4" xlink:href="#catF_l_r_4" attributeName="visibility" attributeType="CSS" to="visible" begin="cat_l_r_3.end" dur="0.2s" fill="freeze"></set>
			<set                xlink:href="#catF_l_r_4" attributeName="visibility" attributeType="CSS" to="hidden"  begin="cat_l_r_4.end" fill="freeze"></set>
			<set id="cat_l_r_5" xlink:href="#catF_l_r_5" attributeName="visibility" attributeType="CSS" to="visible" begin="cat_l_r_4.end" dur="0.2s" fill="freeze"></set>
			<set                xlink:href="#catF_l_r_5" attributeName="visibility" attributeType="CSS" to="hidden"  begin="cat_l_r_5.end" fill="freeze"
								onbegin="Cat.onEnd();"></set>

			<!-- Left Stop -->
			<image id="catF_l_1" width="81" height="48" xlink:href="Cat/cat_l_1.png" style="visibility:hidden;"></image>
			<image id="catF_l_2" width="81" height="48" xlink:href="Cat/cat_l_2.png" style="visibility:hidden;"></image>
			<image id="catF_l_3" width="81" height="48" xlink:href="Cat/cat_l_3.png" style="visibility:hidden;"></image>
			<set id="cat_l_1"  xlink:href="#catF_l_1" attributeName="visibility" attributeType="CSS" to="visible" begin="indefinite"  dur="0.2s" fill="freeze"></set>
			<set               xlink:href="#catF_l_1" attributeName="visibility" attributeType="CSS" to="hidden"  begin="cat_l_1.end" fill="freeze"></set>
			<set id="cat_l_2"  xlink:href="#catF_l_2" attributeName="visibility" attributeType="CSS" to="visible" begin="cat_l_1.end" dur="0.2s" fill="freeze"></set>
			<set               xlink:href="#catF_l_2" attributeName="visibility" attributeType="CSS" to="hidden"  begin="cat_l_2.end" fill="freeze"></set>
			<set id="cat_l_3"  xlink:href="#catF_l_3" attributeName="visibility" attributeType="CSS" to="visible" begin="cat_l_2.end" dur="0.2s" fill="freeze"></set>
			<set               xlink:href="#catF_l_3" attributeName="visibility" attributeType="CSS" to="hidden"  begin="cat_l_3.end" fill="freeze" onbegin="Cat.onEnd();"></set>

			<!--  -->
		</g>

		<script type="text/javascript">
			var Cat = new AnimatronicConstructor("cat", {
				"sit": ["cat_s_1"],
				"roar": ["cat_s_r_1"],
				"stopUp": ["cat_u_1"],
				"runUp": ["cat_u_r_1"],
				"stopDown": ["cat_d_1"],
				"runDown": ["cat_d_r_1"],
				"stopRight": ["cat_r_1"],
				"runRight": ["cat_r_r_1", "cat_r_r_2", "cat_r_r_3", "cat_r_r_4" ,"cat_r_r_5"],
				"stopLeft": ["cat_l_1"],
				"runLeft": ["cat_l_r_1"]
			});
		</script>
	</svg>
	</div>

	<div class="fish" id="actorFish">
		<svg xmlns="http://www.w3.org/2000/svg">
			<g id="fish" class="fish">
				<!-- Sit -->
				<defs>
					<image id="fishD"   width="71" height="60" xlink:href="Fish/fish.gif"></image>
				</defs>
				<!--image id="fishF"   width="71" height="60" xlink:href="Fish/fish.gif"  style="visibility:hidden;"></image-->

				<!--set id="fish_x"   xlink:href="#fishF"  attributeName="visibility" attributeType="CSS" to="visible" begin="indefinite"  dur="2.3s" fill="freeze"></set-->
				<!--set               xlink:href="#fishF"  attributeName="visibility" attributeType="CSS" to="hidden"  begin="fish_x.end"  dur="0.01s"fill="freeze"></set-->

				<!--use id="fishF" xlink:href="#fishD" style="visibility:hidden;"></use-->
				<!--set id="fish_x"   xlink:href="#fishF"  attributeName="visibility" attributeType="CSS" to="visible" begin="indefinite"  dur="2.3s" fill="freeze"></set>
				<set               xlink:href="#fishF"  attributeName="xlink:href" attributeType="CSS" to="#fishF_10"  begin="fish_x.end"  dur="0.01s" fill="freeze"></set-->

				<image id="fishF_1"   width="71" height="60" xlink:href="Fish/fish_1.png"  style="visibility:hidden;"></image>
				<image id="fishF_2"   width="71" height="60" xlink:href="Fish/fish_2.png"  style="visibility:hidden;"></image>
				<image id="fishF_3"   width="71" height="60" xlink:href="Fish/fish_3.png"  style="visibility:hidden;"></image>
				<image id="fishF_4"   width="71" height="60" xlink:href="Fish/fish_4.png"  style="visibility:hidden;"></image>
				<image id="fishF_5"   width="71" height="60" xlink:href="Fish/fish_5.png"  style="visibility:hidden;"></image>
				<image id="fishF_6"   width="71" height="60" xlink:href="Fish/fish_6.png"  style="visibility:hidden;"></image>
				<image id="fishF_7"   width="71" height="60" xlink:href="Fish/fish_7.png"  style="visibility:hidden;"></image>
				<image id="fishF_8"   width="71" height="60" xlink:href="Fish/fish_8.png"  style="visibility:hidden;"></image>
				<image id="fishF_9"   width="71" height="60" xlink:href="Fish/fish_9.png"  style="visibility:hidden;"></image>
				<image id="fishF_10"  width="71" height="60" xlink:href="Fish/fish_10.png" style="visibility:hidden;"></image>
				<image id="fishF_11"  width="71" height="60" xlink:href="Fish/fish_11.png" style="visibility:hidden;"></image>
				<image id="fishF_12"  width="71" height="60" xlink:href="Fish/fish_12.png" style="visibility:hidden;"></image>
				<image id="fishF_13"  width="71" height="60" xlink:href="Fish/fish_13.png" style="visibility:hidden;"></image>
				<image id="fishF_14"  width="71" height="60" xlink:href="Fish/fish_14.png" style="visibility:hidden;"></image>
				<image id="fishF_15"  width="71" height="60" xlink:href="Fish/fish_15.png" style="visibility:hidden;"></image>
				<image id="fishF_16"  width="71" height="60" xlink:href="Fish/fish_16.png" style="visibility:hidden;"></image>
				<image id="fishF_17"  width="71" height="60" xlink:href="Fish/fish_17.png" style="visibility:hidden;"></image>
				<image id="fishF_18"  width="71" height="60" xlink:href="Fish/fish_18.png" style="visibility:hidden;"></image>
				<image id="fishF_19"  width="71" height="60" xlink:href="Fish/fish_19.png" style="visibility:hidden;"></image>
				<image id="fishF_20"  width="71" height="60" xlink:href="Fish/fish_20.png" style="visibility:hidden;"></image>
				<image id="fishF_21"  width="71" height="60" xlink:href="Fish/fish_21.png" style="visibility:hidden;"></image>
				<image id="fishF_22"  width="71" height="60" xlink:href="Fish/fish_22.png" style="visibility:hidden;"></image>
				<image id="fishF_23"  width="71" height="60" xlink:href="Fish/fish_23.png" style="visibility:hidden;"></image>

				<set id="fish_1"   xlink:href="#fishF_1"  attributeName="visibility" attributeType="CSS" to="visible" begin="indefinite"  dur="0.1s" fill="freeze"></set>
				<set               xlink:href="#fishF_1"  attributeName="visibility" attributeType="CSS" to="hidden"  begin="fish_1.end"  fill="freeze"></set>
				<set id="fish_2"   xlink:href="#fishF_2"  attributeName="visibility" attributeType="CSS" to="visible" begin="fish_1.end"  dur="0.1s" fill="freeze"></set>
				<set               xlink:href="#fishF_2"  attributeName="visibility" attributeType="CSS" to="hidden"  begin="fish_2.end"  fill="freeze"></set>
				<set id="fish_3"   xlink:href="#fishF_3"  attributeName="visibility" attributeType="CSS" to="visible" begin="fish_2.end"  dur="0.1s" fill="freeze"></set>
				<set               xlink:href="#fishF_3"  attributeName="visibility" attributeType="CSS" to="hidden"  begin="fish_3.end"  fill="freeze"></set>
				<set id="fish_4"   xlink:href="#fishF_4"  attributeName="visibility" attributeType="CSS" to="visible" begin="fish_3.end"  dur="0.1s" fill="freeze"></set>
				<set               xlink:href="#fishF_4"  attributeName="visibility" attributeType="CSS" to="hidden"  begin="fish_4.end"  fill="freeze"></set>
				<set id="fish_5"   xlink:href="#fishF_5"  attributeName="visibility" attributeType="CSS" to="visible" begin="fish_4.end"  dur="0.1s" fill="freeze"></set>
				<set               xlink:href="#fishF_5"  attributeName="visibility" attributeType="CSS" to="hidden"  begin="fish_5.end"  fill="freeze"></set>
				<set id="fish_6"   xlink:href="#fishF_6"  attributeName="visibility" attributeType="CSS" to="visible" begin="fish_5.end"  dur="0.1s" fill="freeze"></set>
				<set               xlink:href="#fishF_6"  attributeName="visibility" attributeType="CSS" to="hidden"  begin="fish_6.end"  fill="freeze"></set>
				<set id="fish_7"   xlink:href="#fishF_7"  attributeName="visibility" attributeType="CSS" to="visible" begin="fish_6.end"  dur="0.1s" fill="freeze"></set>
				<set               xlink:href="#fishF_7"  attributeName="visibility" attributeType="CSS" to="hidden"  begin="fish_7.end"  fill="freeze"></set>
				<set id="fish_8"   xlink:href="#fishF_8"  attributeName="visibility" attributeType="CSS" to="visible" begin="fish_7.end"  dur="0.1s" fill="freeze"></set>
				<set               xlink:href="#fishF_8"  attributeName="visibility" attributeType="CSS" to="hidden"  begin="fish_8.end"  fill="freeze"></set>
				<set id="fish_9"   xlink:href="#fishF_9"  attributeName="visibility" attributeType="CSS" to="visible" begin="fish_8.end"  dur="0.1s" fill="freeze"></set>
				<set               xlink:href="#fishF_9"  attributeName="visibility" attributeType="CSS" to="hidden"  begin="fish_9.end"  fill="freeze"></set>
				<set id="fish_10"  xlink:href="#fishF_10" attributeName="visibility" attributeType="CSS" to="visible" begin="fish_9.end"  dur="0.1s" fill="freeze"></set>
				<set               xlink:href="#fishF_10" attributeName="visibility" attributeType="CSS" to="hidden"  begin="fish_10.end" fill="freeze"></set>
				<set id="fish_11"  xlink:href="#fishF_11" attributeName="visibility" attributeType="CSS" to="visible" begin="fish_10.end" dur="0.1s" fill="freeze"></set>
				<set               xlink:href="#fishF_11" attributeName="visibility" attributeType="CSS" to="hidden"  begin="fish_11.end" fill="freeze"></set>
				<set id="fish_12"  xlink:href="#fishF_12" attributeName="visibility" attributeType="CSS" to="visible" begin="fish_11.end" dur="0.1s" fill="freeze"></set>
				<set               xlink:href="#fishF_12" attributeName="visibility" attributeType="CSS" to="hidden"  begin="fish_12.end" fill="freeze"></set>
				<set id="fish_13"  xlink:href="#fishF_13" attributeName="visibility" attributeType="CSS" to="visible" begin="fish_12.end" dur="0.1s" fill="freeze"></set>
				<set               xlink:href="#fishF_13" attributeName="visibility" attributeType="CSS" to="hidden"  begin="fish_13.end" fill="freeze"></set>
				<set id="fish_14"  xlink:href="#fishF_14" attributeName="visibility" attributeType="CSS" to="visible" begin="fish_13.end" dur="0.1s" fill="freeze"></set>
				<set               xlink:href="#fishF_14" attributeName="visibility" attributeType="CSS" to="hidden"  begin="fish_14.end" fill="freeze"></set>
				<set id="fish_15"  xlink:href="#fishF_15" attributeName="visibility" attributeType="CSS" to="visible" begin="fish_14.end" dur="0.1s" fill="freeze"></set>
				<set               xlink:href="#fishF_15" attributeName="visibility" attributeType="CSS" to="hidden"  begin="fish_15.end" fill="freeze"></set>
				<set id="fish_16"  xlink:href="#fishF_16" attributeName="visibility" attributeType="CSS" to="visible" begin="fish_15.end" dur="0.1s" fill="freeze"></set>
				<set               xlink:href="#fishF_16" attributeName="visibility" attributeType="CSS" to="hidden"  begin="fish_16.end" fill="freeze"></set>
				<set id="fish_17"  xlink:href="#fishF_17" attributeName="visibility" attributeType="CSS" to="visible" begin="fish_16.end" dur="0.1s" fill="freeze"></set>
				<set               xlink:href="#fishF_17" attributeName="visibility" attributeType="CSS" to="hidden"  begin="fish_17.end" fill="freeze"></set>
				<set id="fish_18"  xlink:href="#fishF_18" attributeName="visibility" attributeType="CSS" to="visible" begin="fish_17.end" dur="0.1s" fill="freeze"></set>
				<set               xlink:href="#fishF_18" attributeName="visibility" attributeType="CSS" to="hidden"  begin="fish_18.end" fill="freeze"></set>
				<set id="fish_19"  xlink:href="#fishF_19" attributeName="visibility" attributeType="CSS" to="visible" begin="fish_18.end" dur="0.1s" fill="freeze"></set>
				<set               xlink:href="#fishF_19" attributeName="visibility" attributeType="CSS" to="hidden"  begin="fish_19.end" fill="freeze"></set>
				<set id="fish_20"  xlink:href="#fishF_20" attributeName="visibility" attributeType="CSS" to="visible" begin="fish_19.end" dur="0.1s" fill="freeze"></set>
				<set               xlink:href="#fishF_20" attributeName="visibility" attributeType="CSS" to="hidden"  begin="fish_20.end" fill="freeze"></set>
				<set id="fish_21"  xlink:href="#fishF_21" attributeName="visibility" attributeType="CSS" to="visible" begin="fish_20.end" dur="0.1s" fill="freeze"></set>
				<set               xlink:href="#fishF_21" attributeName="visibility" attributeType="CSS" to="hidden"  begin="fish_21.end" fill="freeze"></set>
				<set id="fish_22"  xlink:href="#fishF_22" attributeName="visibility" attributeType="CSS" to="visible" begin="fish_21.end" dur="0.1s" fill="freeze"></set>
				<set               xlink:href="#fishF_22" attributeName="visibility" attributeType="CSS" to="hidden"  begin="fish_22.end" fill="freeze"></set>
				<set id="fish_23"  xlink:href="#fishF_23" attributeName="visibility" attributeType="CSS" to="visible" begin="fish_22.end" dur="0.1s" fill="freeze"></set>
				<set               xlink:href="#fishF_23" attributeName="visibility" attributeType="CSS" to="hidden"  begin="fish_23.end" fill="freeze"
							       onbegin="Fish.onEnd();"></set>

				<set id="fish_wait"  xlink:href="#fishF_23" attributeName="visibility" attributeType="CSS" to="hidden"  begin="indefinite" dur="4s" fill="freeze"
								   onend="Fish.onEnd();"></set>
			</g>
			<script type="text/javascript">
				var Fish = new AnimatronicConstructor("fish", {
					"jump": ["fish_x"],
					"jumpAndWait": ["fish_x", "fish_wait"]
				});
			</script>
		</svg>
	</div>

	<script>
		var Direction = { Up: 'up', Down: 'down', Left: 'left', Right: 'right' };

		function setLoop()
		{
            Cat.setAnimationLoop("sit");
            currentRunDirection = null;
		}

		function moveCat()
		{
			if(targetLocation != null)
			{
				var actor = $("#actorCat");
				var pos = actor.position();
				var deltaL = targetLocation.x - pos.left;
				var deltaT = targetLocation.y - pos.top;
				if(Math.abs(deltaL) < 5)
					deltaL = 0;
				if(Math.abs(deltaT) < 5)
					deltaT = 0;

				if(deltaL != 0 || deltaT != 0)
				{
					var dirL;
					if(deltaL == 0)
						dirL = null;
					else if(deltaL > 0)
						dirL = Direction.Right;
					else
						dirL = Direction.Left;

					var dirT;
					if(deltaT == 0)
						dirT = null;
					else if(deltaT > 0)
						dirT = Direction.Down;
					else
						dirT = Direction.Up;

					if(Math.abs(deltaL) >= Math.abs(deltaT))
					{
						setRunAnimationCat(dirL);
						setPositionCat(actor, dirL, dirT);
					}
					else
					{
						setRunAnimationCat(dirT);
						setPositionCat(actor, dirT, dirL);
					}
				}
				else
				{
					targetLocation = null;
					setLoop();
				}
			}
		}

		function setPositionCat(actor, dirP, dirS)
		{
			var x;
			var y;
			switch (dirP)
			{
				case Direction.Down:
					y = 4;
					break;
				case Direction.Up:
					y = -4;
					break;
				case Direction.Left:
					x = -4;
					break;
				case Direction.Right:
					x = 4;
					break;
			}
			switch (dirS)
			{
				case Direction.Down:
					y = 1;
					break;
				case Direction.Up:
					y = -1;
					break;
				case Direction.Left:
					x = -1;
					break;
				case Direction.Right:
					x = 1;
					break;
			}

			var pos = actor.position();
			actor.css('left', (pos.left + x) + 'px');
			actor.css('top', (pos.top + y) + 'px');
		}

        var currentRunDirection = null;
		function setRunAnimationCat(dir)
		{
            if(currentRunDirection != dir)
            {
				Cat.Cancel();
				//Cat.onEnd();
                currentRunDirection = dir;
                switch (dir)
                {
                    case Direction.Down:
                        Cat.setAnimationLoop('runDown');
                        break;
                    case Direction.Up:
                        Cat.setAnimationLoop('runUp');
                        break;
                    case Direction.Left:
                        Cat.setAnimationLoop('runLeft');
                        break;
                    case Direction.Right:
                        Cat.setAnimationLoop('runRight');
                        break;
                }
            }
		}

		var targetLocation = null;
		function goTo()
		{
			// base del gatto (44; 37)
			targetLocation = { x: currentMousePos.x - 44, y: currentMousePos.y - 37 };
		}

		var currentMousePos = { x: -1, y: -1 };
		$(document).mousemove(function(event) {
			currentMousePos.x = event.pageX;
			currentMousePos.y = event.pageY;
		});

		setLoop();
		window.setInterval("moveCat()", 100);
	</script>

	<!-- ------------- -->

<div id="screen" class="scene" onclick="goTo()">
	<svg class="scene" xmlns="http://www.w3.org/2000/svg" width="300" height="300">
		<g id="backClass">
			<image width="540" height="338" xlink:href="scenes/scene.jpg"></image>
		</g>
	</svg>
	<div class="scene" id="area_1"></div>
	<div class="scene" id="area_2">
        <img class="fish" src="./Fish/Fish.gif">
	</div>
	<svg class="scene" xmlns="http://www.w3.org/2000/svg" width="300" height="300">
		<use id="frontClass" xlink:href="#backClass" clip-path="url(#clipArea)"></use>
		<defs>
			<clipPath id="clipArea">
				<path d="m 192.54091,219.49886 8.20051,0 -1.36675,4.2711 -4.78363,5.63784 -3.58771,1.5376 -0.51254,-4.44194 0.17084,-5.12532 z m -19.64703,0 13.15497,-0.17084 -3.9294,13.15497 -4.95447,14.18003 -4.44194,-1.02506 -5.467,-5.29616 -0.51253,-7.51713 3.41687,-6.15037 z m -12.47159,1.02507 7.17544,0 -0.68338,4.10025 -3.24603,6.15037 -2.22097,-3.41687 -1.02506,-4.10026 z M 0.375,95.75 l 0,242.25 116.5,0.0625 0,0.0937 55.625,-0.0625 141.65625,0.0937 0.3125,-0.21875 225.5625,-0.21875 0.25,-146.3125 -5.15625,0.0625 1.96875,-9 -5.3125,-2.84375 -9.96875,1.9375 -18.40625,12.375 -5.59375,6.125 -3.15625,-5.28125 -5.15625,-3.1875 -5.1875,4.9375 -6.25,9.625 -4.53125,9.75 -2.78125,13.34375 -16.40625,8.8125 -6.53125,-22.46875 -4.84375,-13.15625 -2.6875,-5.25 -3.84375,-2.96875 -5.03125,15.1875 -2.875,22.59375 -3.03125,23.3125 -6.5625,3.5625 L 416.53125,248 l -6.375,-14.5 -4.28125,-2.8125 -6.25,12.4375 -1.6875,15.28125 -0.71875,15.625 -23.4375,15.5625 -19.59375,-9.1875 -18.84375,-7.96875 -32.375,-9.1875 -3.34375,-0.71875 -0.625,-1.125 3.03125,-8.0625 -0.5,-29.3125 L 297.5,209.375 l -2.53125,-9.0625 -8.59375,0 -8.59375,5.03125 -9.09375,9.59375 -10.59375,16.6875 -1,5.53125 -4.0625,14.65625 -0.625,1.09375 -65.65625,-4.53125 4.6875,-6.65625 11.59375,-13.65625 2.03125,-7.5625 10.59375,-1 5.0625,-5.5625 16.15625,-68.6875 -2.53125,-6.0625 2.53125,-3.03125 -3.03125,-13.625 -7.5625,-10.125 -12.125,-2 -12.125,6.5625 -24.75,19.1875 -13.125,15.65625 -8.09375,12.625 -7.5625,19.1875 -13.125,39.90625 18.6875,-1 2,15.15625 5.0625,10.59375 2.9375,4.3125 -14.25,2.9375 -15,2.90625 -15.09375,8.28125 -4.0625,-12.375 L 94.4375,221.5 76.78125,177.0625 33.84375,137.65625 0.375,95.75 z"></path>
			</clipPath>
		</defs>
	</svg>
</div>
	<script>
		$('#area_1')[0].appendChild($('#actorCat')[0]);
		$('#area_2')[0].appendChild($('#actorFish')[0]);
	</script>
<br/>

	<div class="controlPanel">
		<button onclick="Cat.setAnimation('roar', setLoop);">Roar</button>
		<button onclick="Fish.setAnimation('jump');">Jump</button>
		<button onclick="Fish.setAnimationLoop('jumpAndWait');">Jump Loop</button>
		<button id="cancel">Cancel</button>
	</div>
</body>
</html>